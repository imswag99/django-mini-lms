{% extends "layout.html" %}

{% block title %}
Courses
{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="bg-bg py-16 text-center">
  <div class="max-w-3xl mx-auto space-y-6 px-6">
    <h1 class="text-4xl md:text-5xl font-bold text-text-primary">
      Explore Our Courses
    </h1>
    <p class="text-text-secondary text-lg">
      Choose from a wide range of expert-led courses designed to boost your skills and career.
    </p>
  </div>
</section>

<!-- Courses Grid -->
<section class="bg-surface py-12">
  <div class="max-w-7xl mx-auto px-6">
    {% if user.is_authenticated and user.is_instructor %}
      <!-- Toggle Buttons -->
      <div class="flex gap-3 mb-6">
        <a href="?filter=all"
            class="px-4 py-2 rounded-lg border border-border font-medium 
                  {% if not request.GET.filter or request.GET.filter == 'all' %}bg-primary text-white{% else %}text-text-secondary hover:bg-surface{% endif %}">
          All Courses
        </a>
        <a href="?filter=my"
            class="px-4 py-2 rounded-lg border border-border font-medium 
                  {% if request.GET.filter == 'my' %}bg-primary text-white{% else %}text-text-secondary hover:bg-surface{% endif %}">
          My Courses
        </a>
      </div>
    {% endif %}

    {% if user.is_authenticated and user.is_instructor and request.GET.filter == "my" %}
      <div class="flex justify-end mb-6">
        <a href="{% url 'create_course' %}"
          class="inline-flex items-center gap-2 bg-primary hover:bg-blue-700 text-white font-medium px-5 py-3 rounded-lg shadow-sm transition">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
          Add Course
        </a>
      </div>
    {% endif %}

    {% if courses %}
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for course in courses %}
          <div class="border border-border rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition">
            
            <!-- Course Image -->
            {% if course.image %}
              <img src="{{ course.image.url }}" alt="{{ course.title }}" class="h-48 w-full object-cover">
            {% else %}
              <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=800&q=80"
                   alt="Course image" class="h-48 w-full object-cover">
            {% endif %}
            
            <!-- Course Details -->
            <div class="p-6 space-y-3">
              <h2 class="text-xl font-semibold text-text-primary">
                {{ course.title }}
              </h2>
              <p class="text-test-secondary text-sm line-clamp-3">
                {{ course.description|truncatewords:20 }}
              </p>
              <p class="text-sm text-accent font-medium">
                Instructor: {{ course.instructor.username }}
              </p>

              <a href="{% url 'course_detail' course.id %}"
                 class="inline-block mt-3 bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition">
                View Details
              </a>
            </div>

          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-center text-text-secondary text-lg mt-12">
        No courses available yet. Check back soon!
      </p>
    {% endif %}
  </div>
</section>

{% endblock %}
